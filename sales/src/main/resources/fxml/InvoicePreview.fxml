<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.mahmoud.sales.controller.InvoicePreviewController"
            stylesheets="@../css/invoice.css">

    <top>
        <HBox spacing="10" padding="12" styleClass="invoice-header">
            <children>
                <ImageView fx:id="companyLogo" fitHeight="60" fitWidth="60" preserveRatio="true"/>
                <VBox>
                    <Label text="شركة المثال لتجارة الإلكترونيات" styleClass="company-name"/>
                    <Label text="شارع المثال 123 - القاهرة" styleClass="company-address"/>
                    <Label text="هاتف: +20 10 0000 000 - info@example.com" styleClass="company-address"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <VBox alignment="TOP_RIGHT">
                    <Label text="فاتورة بيع" styleClass="invoice-title"/>
                    <Label fx:id="lblInvoiceNumber" styleClass="invoice-meta"/>
                    <Label fx:id="lblInvoiceDate" styleClass="invoice-meta"/>
                </VBox>
            </children>
        </HBox>
    </top>

    <center>
        <VBox spacing="12" padding="16">
            <GridPane hgap="20" vgap="6">
                <columnConstraints>
                    <ColumnConstraints percentWidth="50"/>
                    <ColumnConstraints percentWidth="50"/>
                </columnConstraints>

                <Label text="العميل:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="section-title"/>
                <VBox GridPane.columnIndex="0" GridPane.rowIndex="1">
                    <Label fx:id="lblCustomerName"/>
                    <Label fx:id="lblCustomerLocation"/>
                </VBox>

                <Label text="مندوب المبيعات:" GridPane.columnIndex="1" GridPane.rowIndex="0" styleClass="section-title"/>
                <VBox GridPane.columnIndex="1" GridPane.rowIndex="1">
                    <Label fx:id="lblEmployeeName"/>
                    <Label fx:id="lblEmployeeRole"/>
                </VBox>
            </GridPane>

            <TableView fx:id="tblDetails" prefHeight="220">
                <columns>
                    <TableColumn fx:id="colItem" text="الصنف" prefWidth="220"/>
                    <TableColumn fx:id="colQty" text="الكمية" prefWidth="80"/>
                    <TableColumn fx:id="colUnitPrice" text="سعر الوحدة" prefWidth="120"/>
                    <TableColumn fx:id="colLineTotal" text="الإجمالي" prefWidth="120"/>
                </columns>
            </TableView>

            <HBox spacing="20" alignment="CENTER_RIGHT">
                <VBox spacing="6">
                    <HBox spacing="8">
                        <Label text="المجموع الفرعي:"/>
                        <Label fx:id="lblSubTotal"/>
                    </HBox>
                    <HBox spacing="8">
                        <Label text="الضريبة:"/>
                        <Label fx:id="lblTax"/>
                    </HBox>
                    <HBox spacing="8">
                        <Label text="الإجمالي الكلي:" styleClass="grand-total-label"/>
                        <Label fx:id="lblGrandTotal" styleClass="grand-total-value"/>
                    </HBox>
                </VBox>
            </HBox>

            <Label text="الدفعات:" styleClass="section-title"/>
            <TableView fx:id="tblPayments" prefHeight="120">
                <columns>
                    <TableColumn fx:id="colPayType" text="نوع الدفع" prefWidth="140"/>
                    <TableColumn fx:id="colPayAmount" text="المبلغ" prefWidth="120"/>
                    <TableColumn fx:id="colPayDate" text="التاريخ" prefWidth="160"/>
                </columns>
            </TableView>
        </VBox>
    </center>

    <bottom>
        <HBox spacing="10" padding="12" alignment="CENTER_RIGHT">
            <Button text="طباعة" onAction="#onPrint"/>
            <Button text="إغلاق" onAction="#onClose"/>
        </HBox>
    </bottom>
</BorderPane>
